<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>财富号首页</title>
	<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, viewport-fit=cover">
	<meta name="format-detection" content="telephone=no, email=no" />
	<link href="{{{style.css}}}" rel="stylesheet" type="text/css" />
</head>
<body class="gray-bg black-skin">
<div class="index data-list-page">
	<ul class="nav-list">
		<li>
			<i class="sprite-ico icons-icon1"></i>
			<span>推荐订阅</span>
		</li>
		<li>
			<i class="sprite-ico icons-icon2"></i>
			<span>我的订阅</span>
		</li>
		<li>
			<i class="sprite-ico icons-icon3"></i>
			<span>我的收藏</span>
		</li>
	</ul>
	<div class="data-list">
		<div class="iscroll" id="content-IScroll">
			<div class="scroll-wrap">
				<div class="pullDownTip" id="pullDown"></div>
				<ul class="common-info-list">
					<li>
						<div class="img-wrap">
							<img src="../resource/img/index_img1.png" alt="" />
						</div>
						<div class="info-wrap">
							<p class="title">投资风向标：A股目前处于震荡市 潜伏“人少”的地方 投资风向标：A股目前处于震荡市 潜伏“人少”的地方</p>
							<p class="sub">
								<img src="../resource/img/index_avatar.png" alt="" />
								<span>中国证券网</span>
								<span class="fr">200阅读</span>
							</p>
						</div>
					</li>
					<li>
						<div class="img-wrap">
							<img src="../resource/img/index_img2.png" alt="" />
						</div>
						<div class="info-wrap">
							<p class="title">获得云南国际信托11.2亿贷款期限不超过3年</p>
							<p class="sub">
								<img src="../resource/img/index_avatar.png" alt="" />
								<span>云南诚投</span>
								<span class="fr">892阅读</span>
							</p>
						</div>
					</li>
					<li>
						<div class="img-wrap">
							<img src="../resource/img/index_img3.png" alt="" />
						</div>
						<div class="info-wrap">
							<p class="title">#粤港澳概念呼之欲出#</p>
							<p class="sub">
								<img src="../resource/img/index_avatar.png" alt="" />
								<span>热门话题</span>
								<span class="fr">200参与</span>
							</p>
						</div>
					</li>
					<li class="no-img">
						<div class="info-wrap">
							<p class="title">原工信部部长李毅中：四组数据证明实体经济“空心化”严重性</p>
							<p class="sub">
								<img src="../resource/img/index_avatar.png" alt="" />
								<span>证券时报</span>
								<span class="fr">199阅读</span>
							</p>
						</div>
					</li>
					<li class="no-img">
						<div class="info-wrap">
							<p class="title">#粤港澳概念呼之欲出#</p>
							<p class="sub">
								<img src="../resource/img/index_avatar.png" alt="" />
								<span>彬哥看盘</span>
								<span class="fr">199阅读</span>
							</p>
						</div>
					</li>
					<li>
						<div class="img-wrap">
							<img src="../resource/img/index_img3.png" alt="" />
						</div>
						<div class="info-wrap">
							<p class="title">#粤港澳概念呼之欲出#</p>
							<p class="sub">
								<img src="../resource/img/index_avatar.png" alt="" />
								<span>热门话题</span>
								<span class="fr">200参与</span>
							</p>
						</div>
					</li>
					<li class="no-img">
						<div class="info-wrap">
							<p class="title">原工信部部长李毅中：四组数据证明实体经济“空心化”严重性</p>
							<p class="sub">
								<img src="../resource/img/index_avatar.png" alt="" />
								<span>证券时报</span>
								<span class="fr">199阅读</span>
							</p>
						</div>
					</li>
					<li>
						<div class="img-wrap">
							<img src="../resource/img/index_img3.png" alt="" />
						</div>
						<div class="info-wrap">
							<p class="title">#粤港澳概念呼之欲出#</p>
							<p class="sub">
								<img src="../resource/img/index_avatar.png" alt="" />
								<span>热门话题</span>
								<span class="fr">200参与</span>
							</p>
						</div>
					</li>
					<li class="no-img">
						<div class="info-wrap">
							<p class="title">原工信部部长李毅中：四组数据证明实体经济“空心化”严重性</p>
							<p class="sub">
								<img src="../resource/img/index_avatar.png" alt="" />
								<span>证券时报</span>
								<span class="fr">199阅读</span>
							</p>
						</div>
					</li>
					<li>
						<div class="img-wrap">
							<img src="../resource/img/index_img3.png" alt="" />
						</div>
						<div class="info-wrap">
							<p class="title">#粤港澳概念呼之欲出#</p>
							<p class="sub">
								<img src="../resource/img/index_avatar.png" alt="" />
								<span>热门话题</span>
								<span class="fr">200参与</span>
							</p>
						</div>
					</li>
					<li class="no-img">
						<div class="info-wrap">
							<p class="title">原工信部部长李毅中：四组数据证明实体经济“空心化”严重性</p>
							<p class="sub">
								<img src="../resource/img/index_avatar.png" alt="" />
								<span>证券时报</span>
								<span class="fr">199阅读</span>
							</p>
						</div>
					</li>
					<li>
						<div class="img-wrap">
							<img src="../resource/img/index_img3.png" alt="" />
						</div>
						<div class="info-wrap">
							<p class="title">#粤港澳概念呼之欲出#</p>
							<p class="sub">
								<img src="../resource/img/index_avatar.png" alt="" />
								<span>热门话题</span>
								<span class="fr">200参与</span>
							</p>
						</div>
					</li>
					<li class="no-img">
						<div class="info-wrap">
							<p class="title">原工信部部长李毅中：四组数据证明实体经济“空心化”严重性</p>
							<p class="sub">
								<img src="../resource/img/index_avatar.png" alt="" />
								<span>证券时报</span>
								<span class="fr">199阅读</span>
							</p>
						</div>
					</li>
				</ul>
				<div class="pullUpTip" id="pullUp"></div>
			</div>
		</div>
	</div>
</div>
<combined src="fortune.lib.min.js"></combined>
<script src="../../../public/source/js/lib/iscroll/iscroll-probe.js"></script>
<script type="text/html" id="data">
<li>
	<div class="img-wrap">
		<img src="../resource/img/index_img1.png" alt="" />
	</div>
	<div class="info-wrap">
		<p class="title">投资风向标：A股目前处于震荡市 潜伏“人少”的地方</p>
		<p class="sub">
			<img src="../resource/img/index_avatar.png" alt="" />
			<span>中国证券网</span>
			<span class="fr">200阅读</span>
		</p>
	</div>
</li>
<li>
	<div class="img-wrap">
		<img src="../resource/img/index_img2.png" alt="" />
	</div>
	<div class="info-wrap">
		<p class="title">获得云南国际信托11.2亿贷款期限不超过3年</p>
		<p class="sub">
			<img src="../resource/img/index_avatar.png" alt="" />
			<span>云南诚投</span>
			<span class="fr">892阅读</span>
		</p>
	</div>
</li>
<li>
	<div class="img-wrap">
		<img src="../resource/img/index_img3.png" alt="" />
	</div>
	<div class="info-wrap">
		<p class="title">#粤港澳概念呼之欲出#</p>
		<p class="sub">
			<img src="../resource/img/index_avatar.png" alt="" />
			<span>热门话题</span>
			<span class="fr">200参与</span>
		</p>
	</div>
</li>
<li class="no-img">
	<div class="info-wrap">
		<p class="title">原工信部部长李毅中：四组数据证明实体经济“空心化”严重性</p>
		<p class="sub">
			<img src="../resource/img/index_avatar.png" alt="" />
			<span>证券时报</span>
			<span class="fr">199阅读</span>
		</p>
	</div>
</li>
<li class="no-img">
	<div class="info-wrap">
		<p class="title">#粤港澳概念呼之欲出#</p>
		<p class="sub">
			<img src="../resource/img/index_avatar.png" alt="" />
			<span>彬哥看盘</span>
			<span class="fr">199阅读</span>
		</p>
	</div>
</li>
</script>
<script type="text/javascript">
	$(function () {
		var myScroll;
        var $scrollObj = $('#content-IScroll');
        var $pullUpTip = $('#pullUp');
        var $pullDownTip = $('#pullDown');
        var data = $('#data').html();
        $scrollObj.size() > 0 && scrollInit();
        function scrollInit() {
            var wrapHeight = $scrollObj.height() >> 0;
            var pullOffset = 30;
            var pullRelease = 40;
            var isRefresh = false;
            var loadMore = false;
            myScroll = new IScroll($scrollObj[0], {probeType: 2, mouseWheel: true});
            myScroll.on('scroll', function () {
                var listHeight = $scrollObj.find('.scroll-wrap').height() >> 0;
                loadMore = false;
                isRefresh = false;
				if (this.y >> 0 > pullRelease) {
					$pullDownTip.html('<i></i><div><p>正在刷新数据...</p></div>').addClass('show');
                    isRefresh = true;
                    return;
                }
                if (this.y >> 0 > pullOffset) {
                    $pullDownTip.html('<i></i><div><p>下拉刷新</p></div>').addClass('show');
                    return;
                }
                if (this.y >> 0 < wrapHeight - listHeight - pullRelease) {
                    $pullUpTip.html('<span class="loading"></span><span>数据载入中...</span>');
                    loadMore = true;
                    return;
                }
                if (this.y >> 0 < wrapHeight - listHeight - pullOffset) {
                    $pullUpTip.html('上拉加载更多');
                }
            });
            myScroll.on('scrollEnd', function () {
                if (isRefresh) {
					//todo: refresh data list
					$pullDownTip.html('<i></i><div><p>刷新成功</p><p>最后更新 17:55:49</p></div>');
					//todo: ajax callback
                    setTimeout(function () {
                        $pullDownTip.html('').removeClass('show');
                        //todo: refresh data list
                        setTimeout(function () {
                            myScroll.refresh();
                        }, 0);
                    }, 1000);
                    return;
                }
                if (loadMore) {
                    //todo: ajax callback
                    setTimeout(function () {
                        $pullUpTip.html('');
                        //todo: refresh data list
						$scrollObj.find('.common-info-list').append($(data));
                        setTimeout(function() {
                            myScroll.refresh();
                        }, 0);
                    }, 1000);
                    return;
                }
            });
			
            //移动端直接上划到顶部title栏的时候，不会触发touchend事件,添加下面一段代码
            var setTimeout_move;
            var hand_scrollEnd = function (time, e) {
                clearInterval(setTimeout_move);
                if (!time) time = 200;
                setTimeout_move = setTimeout(function () {
                    myScroll._end(e);
                }, time);
            }
            document.getElementById("content-IScroll").addEventListener('touchmove', function (e) {
                if (/iPhone|iPad|iPod|Macintosh/i.test(navigator.userAgent)) {
                    if (e.touches[0].clientY < 0 || e.touches[0].clientY > window.innerHeight) {
                        hand_scrollEnd(200, e);
                    }
                }
                e.preventDefault();
            }, false);
        }
    });
</script>
</body>
</html>